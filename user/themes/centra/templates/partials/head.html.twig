<!DOCTYPE html>
<html lang="{{ grav.language.getLanguage ?: 'en' }}">
<head>
    {% block head %}
    <meta charset="utf-8" />
    <title>{% if header.title %}{{ header.title }} | {% endif %}{{ site.title }}</title>
    {% for meta in page.metadata %}
    <meta {% if meta.name %}name="{{ meta.name }}" {% endif %}{% if meta.http_equiv %}http-equiv="{{ meta.http_equiv }}" {% endif %}{% if meta.charset %}charset="{{ meta.charset }}" {% endif %}{% if meta.property %}property="{{ meta.property }}" {% endif %}{% if meta.content %}content="{{ meta.content }}" {% endif %}/>
    {% endfor %}
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no" />
    <link rel="icon" type="image/png" href="{{ url('theme://images/favicon.png') }}">

        {% block stylesheets %}
            {% do assets.addCss('theme://css/style.css',102) %}

            {% if browser.getBrowser == 'msie' and browser.getVersion >= 8 and browser.getVersion <= 9 %}
            {% endif %}

            {{ assets.css() }}
        {% endblock %}

        {% block javascripts %}
            {% do assets.addJs('jquery',101) %}
            {{ assets.js() }}
        {% endblock %}

    {% endblock %}
    <script>
        function toggleSearch() {
            document.getElementById("navigation-wrapper").classList.toggle("remove-border");
            document.getElementById("search").classList.toggle("show");
            document.getElementById("navigation-background").classList.toggle("show");
            document.getElementById("search-button").classList.toggle("close");
        }

        function toggleBurgerMenu() {
            document.body.classList.toggle("sidebar-is-shown");
            document.getElementById("navigation-link-developers").classList.toggle("hide");
            document.getElementById("burger-menu").classList.toggle("close");
            document.getElementById("main-sidebar").classList.toggle("show-sidebar");
            if (document.getElementById("sidebar")) {
                document.getElementById("sidebar").classList.toggle("show-sidebar");
            }
        }

        function togglePageSearch() {
            document.getElementById("toc").classList.toggle("show");
        }

        function backgroundOnScroll() {
            var landingPage = document.getElementById("landing-page");

            if (!landingPage) {
                return;
            }

            var boundingGetStartedSection = document.getElementById("get-started-section").getBoundingClientRect();
            var basicSection = document.getElementById("basic-section");
            var basicSectionWrapper = document.getElementById("basic-section-wrapper");
            var boundingBasicSectionWrapper = basicSectionWrapper.getBoundingClientRect();
            var boundingLandingPageFooter = document.getElementById("landing-page-footer").getBoundingClientRect();
            var boundingSupporSection = document.getElementById("support-section").getBoundingClientRect();
            var centraCommerce = document.getElementById("centra-commerce");
            var SCROLL_300_PX = 300;
            var SCROLL_50_PX = 50;

            if (boundingGetStartedSection.top < (window.innerHeight - SCROLL_300_PX)) {
                landingPage.className = "landing-page white";
            }

            if (boundingGetStartedSection.top > (window.innerHeight - SCROLL_300_PX)) {
                landingPage.className = "landing-page black";
            }

            if (boundingBasicSectionWrapper.bottom > SCROLL_50_PX) {
                basicSection.classList.add("black");
            }

            if (boundingBasicSectionWrapper.bottom < SCROLL_50_PX) {
                basicSection.classList.remove("black");
            }
        }

        function startCodeAnimationOnScroll() {
            var landingPage = document.getElementById("landing-page");

            if (!landingPage) {
                return;
            }

            var boundingHeroSection = document.getElementById("hero-section").getBoundingClientRect();
            var getStartedSectionCode = document.querySelectorAll(".get-started-section .css-typing p");
            var SCROLL_500_PX = 500;

            if (boundingHeroSection.bottom < SCROLL_500_PX) {
                getStartedSectionCode.forEach(function(code) {
                    code.classList.add("type");
                })
            }
        }

        function requestAccessOnScroll() {
            var bar = document.getElementById("request-access");
            var footerNav = document.getElementById("landing-page-footer-navigation");
            
            if (!bar || !footerNav) {
                return;
            }

            var bounding = footerNav.getBoundingClientRect();
            var SCROLL_65_PX = 65;
            var SCROLL_180_PX = 180;

            if (document.body.scrollTop > SCROLL_65_PX || document.documentElement.scrollTop > SCROLL_65_PX) {
                bar.className = "fadeInDown request-access-bar";
              } else {
                bar.className = "fadeOutUp request-access-bar";
              }
            
            if (bounding.top < (window.innerHeight - SCROLL_180_PX)) {
                bar.className = "fadeOutUp request-access-bar";
            }
        }

        var prevScrollpos = window.pageYOffset;

        function navigationOnScroll() {
            var navigation = document.getElementById("navigation-wrapper");
            var currentScrollPos = window.pageYOffset;

            if (prevScrollpos > currentScrollPos || window.pageYOffset < 40) {
                navigation.className = "navigation-wrapper showNavigation";
            } else {
                navigation.className = "navigation-wrapper hideNavigation";
            }
            prevScrollpos = currentScrollPos;
        }

        function spinOnScroll() {
            var circle = document.getElementById("centra-commerce");

            if (!circle) {
                return;
            }

            function spinning() {
                circle.style.transform = "rotate("+(window.pageYOffset / 5)+"deg)";
            }

            var circleBounding = circle.getBoundingClientRect();

            if (circleBounding.top < window.innerHeight) {
                window.addEventListener("scroll", spinning());
            }
        }

        function showSearchResults(searchStringValue) {
            var searchResults = document.getElementById("search-results");
            var searchPageContent = document.getElementById("search-page-content");
            var background = document.getElementById("search-navigation-background");
            var searchWrapper = document.getElementById("tntsearch-wrapper")
            var input = document.getElementById("input-search");
            var isHidden = searchResults.style.display == "none";

            if (searchStringValue.length === 0) {
                searchPageContent.classList.add("hide");
                background.classList.add("big-screen");
                searchWrapper.classList.remove("small-screen");
            } else {
                searchPageContent.classList.remove("hide");
                background.classList.remove("big-screen");
                searchWrapper.classList.add("small-screen");
            }
        }

        function redirectToSearchPage() {
            var navigationSearchButton = document.getElementById("navigation-search-button");
            var inputValue = document.getElementById("site-search").value;
            var inputSearch = document.getElementById("input-search");

            sessionStorage.setItem('searchValue', inputValue);
            location.href = "/search?query=" + inputValue;
        }

        function initInput(input) {
            var query = window.location.search.split('=')[1];

            if (!query) {
                return;
            }

            input.value = query || '';
            input.dispatchEvent(new Event('input'));
            
        }

        function load() {
            window.setTimeout(function() { 
                var navigationMenu = document.getElementById("navigation-menu");
                var navigationRight = document.getElementById("navigation-right");
                var heroSection = document.getElementById("hero-section");

                document.getElementById("loading").classList.add("remove-block");
                navigationMenu.classList.add("show");
                navigationRight.classList.add("show");

                if (!heroSection) {
                    return;
                }
                heroSection.classList.add("show");
            }, 400);
            window.setTimeout(function() { 
                var screenProduct = document.getElementById("graphic-screen-product");

                if (!screenProduct) {
                    return;
                }

                screenProduct.classList.add("checked");
            }, 1000);
        };

        window.onload = load();
        window.onscroll = function() {requestAccessOnScroll(), spinOnScroll(), backgroundOnScroll(), startCodeAnimationOnScroll(), navigationOnScroll()};
        window.addEventListener('load', () => {
            var input = document.getElementById("input-search");
            
            if (input) {
                input.addEventListener('input', (e) => showSearchResults(e.target.value), false);
                initInput(input);
            }
        }, false )
    </script>
</head>